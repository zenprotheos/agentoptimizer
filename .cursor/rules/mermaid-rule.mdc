---
description: ANY diagram/mermaid used. Can also use to make corrections after the fact.
alwaysApply: false
---
# Mermaid Diagram Syntax Rules

## üö® CRITICAL SYNTAX RULES

### 1. NO HTML Tags - Use Pipe `|` for Line Breaks
‚ùå `<br/>`, `<b>`, `<i>` - Break parsing  
‚ùå `AR[AgentRunner<br/>4 modules]` - Causes "DIAMOND_START" parse error  
‚úÖ `AR["AgentRunner|4 modules"]` - Works correctly with quotes and pipe

### 2. Quote Special Characters & Avoid Nested Quotes
‚ùå `A[File/Path]` - Breaks  
‚ùå `A[Text with "quotes" inside]` - Nested quotes break parsing  
‚úÖ `A["File/Path"]` - Works  
‚úÖ `A["Text with quotes inside"]` - Remove inner quotes

### 3. Class Diagrams: Standard Syntax + Labels
‚ùå `class A ||--|| B` - Complex syntax breaks  
‚úÖ `A --> B : "label"` - Standard syntax works

**Preferred arrows**: `-->`, `--o`, `--|>`, `--*`

### 4. Sequence Diagrams: Define Participants First
‚ùå Using undefined participants  
‚úÖ `participant User` before using `User`

### 5. Notes: Diagram-Specific Syntax
- **Flowcharts**: NO `note right of` - use dotted connections instead
- **State diagrams**: `note right of X ... end note` works
- **Class diagrams**: Use standard note syntax

## Common Parse Errors & Solutions

### "DIAMOND_START" Error
**Error message**: `Parse error on line X: Expecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', got 'DIAMOND_START'`
**Cause**: HTML `<br/>` tags in flowchart node text
**Solution**: Replace `<br/>` with `|` and quote the text
```
‚ùå AR[AgentRunner<br/>4 modules]
‚úÖ AR["AgentRunner|4 modules"]
```

## Quick Error Fixes
1. HTML tags ‚Üí pipe `|` in quotes
2. Unquoted special chars ‚Üí add quotes `["text"]`
3. Nested quotes ‚Üí remove inner quotes
4. Complex class syntax ‚Üí use `-->` with labels
5. Flowchart notes ‚Üí use dotted connections
6. Undefined participants ‚Üí define first
7. "DIAMOND_START" error ‚Üí remove `<br/>`, use `|` in quotes

**MANDATORY**: Check syntax against these rules before publishing any diagram.
description: For all UML / Mermaid Diagrams tasks to ensure you're creating diagrams without error.
alwaysApply: false
---
For all UML / Mermaid Diagrams, you MUST check `.cursor\rules\mermaid-rule.mdc` to ensure you're creating diagrams without error.